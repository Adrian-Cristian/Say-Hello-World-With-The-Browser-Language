<!DOCTYPE html>

<html lang="pt-br">

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style/style.css">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>JavaScript disabled</title>

</head>

<body class="reload">
    <noscript id="navigatorJs">
    <h1 style="color: white; text-align: center; margin-top: 195px;"> Oops, your browser has JavaScript disabled. Therefore, some functions will not work correctly. To have a complete experience, enable it.</h1>

    <p style="color: white; text-align: center; margin-top: 50px;">When you enable it, click <a href="index.html">here</a> to be redirected to the main page.</p>
    </noscript>


    <script type="text/javascript">
        function readTextFile(file, callback) {
            var rawFile = new XMLHttpRequest();
            rawFile.overrideMimeType("application/json");
            rawFile.open("GET", file, true);
            rawFile.onreadystatechange = function() {
                if (rawFile.readyState === 4 && rawFile.status == "200") {
                    callback(rawFile.responseText);
                }
            }
            rawFile.send(null);

            //https://stackoverflow.com/questions/40954960/read-an-external-local-json-file-into-javascript
        }

        readTextFile("languages.json", function(text) {
            const langBrowser = navigator.language

            const languages = JSON.parse(text);

            const st = {
                'pageNumber': 1,
            }

            const title = ''

            const navigatorJs = document.getElementById('navigatorJs')

            if (navigatorJs && navigatorJs.parentNode !== null) {
                navigatorJs.parentNode.removeChild(navigatorJs)
            } else {
                document.body.innerHTML = ''
                document.body.style.backgroundColor = '#0a2a43'
            }

            document.title = 'JavaScript enabled'

            document.body.style.textAlign = 'center'
            document.body.style.marginTop = '305px'
            document.body.style.color = 'WHITE'

            window.history.pushState(st, title)


            let langContext = false

            languages.forEach(l => {
                if (l.tipo == langBrowser) {

                    document.body.innerHTML = '<h1>' + l.javascriptEnabledMessage + '</h1>'
                    langContext = true

                }
            })

            if (langContext == false || document.body.innerText == 'undefined') return document.body.innerHTML = '<h1>' + 'Your JavaScript is already enabled. ^' + '</h1>';


            setTimeout(function() {
                window.location.href = 'index.html'
            }, 1000 * 3)

        })
    </script>

</body>

</html>